<!DOCTYPE html>
<html>
<head>
  <title>Forest Fire Detection Dashboard</title>
  <meta http-equiv="refresh" content="10">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #eef2f3;
      text-align: center;
      padding: 20px;
    }

    h1 {
      color: #2c3e50;
    }

    .sensor-box {
      background-color: #fff;
      padding: 15px;
      margin: 10px auto;
      width: 300px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .alert {
      font-size: 20px;
      font-weight: bold;
      color: white;
      background-color: red;
      padding: 10px;
      margin-top: 20px;
      border-radius: 10px;
    }

    .safe {
      font-size: 20px;
      font-weight: bold;
      color: white;
      background-color: green;
      padding: 10px;
      margin-top: 20px;
      border-radius: 10px;
    }
  </style>
</head>
<body>

<h1>ğŸ”¥ Forest Fire Detection Dashboard</h1>

<div id="data">
  <p>Loading data...</p>
</div>

<script>
  const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRr-cREwXrVtnlBW5-K-0UWRWUidi_UgjrH7RKIDLWGXQDjRGJP5LHF-Looifn6YXfZHr7PAjP8eeaU/pub?output=csv";

  fetch(sheetURL)
    .then(response => response.text())
    .then(csv => {
      const rows = csv.trim().split("\n");
      const lastRow = rows[rows.length - 1].split(",");

      const temperature = parseFloat(lastRow[0]);
      const humidity = parseFloat(lastRow[1]);
      const methane = parseFloat(lastRow[2]);
      const co2 = parseFloat(lastRow[3]);

      const fireRisk = (methane > 2000 || co2 > 2000 || temperature > 55 || humidity > 50);

      const html = `
        <div class="sensor-box">
          <h2>ğŸŒ¡ï¸ Temperature: ${temperature} Â°C</h2>
        </div>
        <div class="sensor-box">
          <h2>ğŸ’§ Humidity: ${humidity} %</h2>
        </div>
        <div class="sensor-box">
          <h2>ğŸŸ¤ Methane (MQ4): ${methane}</h2>
        </div>
        <div class="sensor-box">
          <h2>âš« CO2 (MQ135): ${co2}</h2>
        </div>
        <div class="${fireRisk ? 'alert' : 'safe'}">
          Fire Risk: ${fireRisk ? "DETECTED ğŸ”¥" : "SAFE âœ…"}
        </div>
      `;

      document.getElementById("data").innerHTML = html;
    })
    .catch(error => {
      document.getElementById("data").innerHTML = "<p>Error loading data.</p>";
      console.error("Fetch error:", error);
    });
</script>

</body>
</html>
