<!DOCTYPE html>
<html>
<head>
  <title>Forest Fire Detection Dashboard</title>
  <meta http-equiv="refresh" content="10">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #eef2f3;
      text-align: center;
      padding: 20px;
    }

    h1 {
      color: #2c3e50;
    }

    .sensor-box {
      background-color: #fff;
      padding: 15px;
      margin: 10px auto;
      width: 350px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .alert {
      font-size: 20px;
      font-weight: bold;
      color: white;
      background-color: red;
      padding: 10px;
      margin-top: 20px;
      border-radius: 10px;
    }

    .safe {
      font-size: 20px;
      font-weight: bold;
      color: white;
      background-color: green;
      padding: 10px;
      margin-top: 20px;
      border-radius: 10px;
    }
  </style>
</head>
<body>

<h1>🔥 Forest Fire Detection Dashboard</h1>

<div id="satellite-data">
  <p>Loading Satellite Data...</p>
</div>

<div id="ground-data">
  <p>Loading Ground Data...</p>
</div>

<div id="comparison-data">
  <p>Loading Comparison...</p>
</div>

<script>
  const sheetURL = "YOUR_GOOGLE_SHEET_CSV_LINK"; // Replace with your CSV link

  fetch(sheetURL)
    .then(response => response.text())
    .then(csv => {
      const rows = csv.trim().split("\n");

      // Assuming last row = ground data, second last row = satellite data
      const satelliteRow = rows[rows.length - 2].split(",");
      const groundRow = rows[rows.length - 1].split(",");

      // Satellite Data
      const sat_humidity = parseFloat(satelliteRow[0]);
      const sat_co2 = parseFloat(satelliteRow[1]);
      const sat_methane = parseFloat(satelliteRow[2]);

      // Ground Data
      const ground_humidity = parseFloat(groundRow[0]);
      const ground_co2 = parseFloat(groundRow[1]);
      const ground_methane = parseFloat(groundRow[2]);

      // Tolerance for matching
      const tolerance = 0.5;
      const mismatch =
        Math.abs(sat_humidity - ground_humidity) > tolerance ||
        Math.abs(sat_co2 - ground_co2) > tolerance ||
        Math.abs(sat_methane - ground_methane) > tolerance;

      // Satellite HTML
      document.getElementById("satellite-data").innerHTML = `
        <div class="sensor-box">
          <h2>🛰️ Satellite Data</h2>
          <p>💧 Humidity: ${sat_humidity} %</p>
          <p>⚫ CO₂: ${sat_co2}</p>
          <p>🟤 Methane: ${sat_methane}</p>
        </div>
      `;

      // Ground HTML
      document.getElementById("ground-data").innerHTML = `
        <div class="sensor-box">
          <h2>🌍 Ground Data</h2>
          <p>💧 Humidity: ${ground_humidity} %</p>
          <p>⚫ CO₂: ${ground_co2}</p>
          <p>🟤 Methane: ${ground_methane}</p>
        </div>
      `;

      // Comparison HTML
      document.getElementById("comparison-data").innerHTML = `
        <div class="${mismatch ? 'alert' : 'safe'}">
          Data Match Status: ${mismatch ? "MISMATCH ⚠️" : "MATCH ✅"}
        </div>
      `;
    })
    .catch(error => {
      document.getElementById("satellite-data").innerHTML = "<p>Error loading satellite data.</p>";
      document.getElementById("ground-data").innerHTML = "<p>Error loading ground data.</p>";
      document.getElementById("comparison-data").innerHTML = "<p>Error loading comparison.</p>";
      console.error("Fetch error:", error);
    });
</script>

</body>
</html>
