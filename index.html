<!DOCTYPE html>
<html>
<head>
  <title>Forest Fire Detection Dashboard</title>
  <meta http-equiv="refresh" content="10">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #eef2f3;
      text-align: center;
      padding: 20px;
    }

    h1 {
      color: #2c3e50;
    }

    .sensor-box {
      background-color: #fff;
      padding: 15px;
      margin: 10px auto;
      width: 350px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .alert {
      font-size: 20px;
      font-weight: bold;
      color: white;
      background-color: red;
      padding: 10px;
      margin-top: 20px;
      border-radius: 10px;
    }

    .safe {
      font-size: 20px;
      font-weight: bold;
      color: white;
      background-color: green;
      padding: 10px;
      margin-top: 20px;
      border-radius: 10px;
    }
  </style>
</head>
<body>

<h1>üî• Forest Fire Detection Dashboard</h1>

<div id="data">
  <p>Loading data...</p>
</div>

<script>
  const sheetURL = "YOUR_GOOGLE_SHEET_CSV_LINK"; // Replace with your CSV link

  fetch(sheetURL)
    .then(response => response.text())
    .then(csv => {
      const rows = csv.trim().split("\n");

      // Assuming last two rows contain the two data sets
      const lastRow = rows[rows.length - 1].split(",");
      const secondLastRow = rows[rows.length - 2].split(",");

      // Dataset 1
      const humidity1 = parseFloat(secondLastRow[0]);
      const co2_1 = parseFloat(secondLastRow[1]);
      const methane1 = parseFloat(secondLastRow[2]);

      // Dataset 2
      const humidity2 = parseFloat(lastRow[0]);
      const co2_2 = parseFloat(lastRow[1]);
      const methane2 = parseFloat(lastRow[2]);

      // Compare values (allowing small tolerance to avoid noise)
      const tolerance = 0.5; // Adjust tolerance if needed
      const dataMismatch =
        Math.abs(humidity1 - humidity2) > tolerance ||
        Math.abs(co2_1 - co2_2) > tolerance ||
        Math.abs(methane1 - methane2) > tolerance;

      const html = `
        <div class="sensor-box">
          <h2>üíß Humidity Set 1: ${humidity1} % | Set 2: ${humidity2} %</h2>
        </div>
        <div class="sensor-box">
          <h2>‚ö´ CO‚ÇÇ Set 1: ${co2_1} | Set 2: ${co2_2}</h2>
        </div>
        <div class="sensor-box">
          <h2>üü§ Methane Set 1: ${methane1} | Set 2: ${methane2}</h2>
        </div>
        <div class="${dataMismatch ? 'alert' : 'safe'}">
          Data Status: ${dataMismatch ? "MISMATCH ‚ö†Ô∏è" : "MATCH ‚úÖ"}
        </div>
      `;

      document.getElementById("data").innerHTML = html;
    })
    .catch(error => {
      document.getElementById("data").innerHTML = "<p>Error loading data.</p>";
      console.error("Fetch error:", error);
    });
</script>

</body>
</html>
