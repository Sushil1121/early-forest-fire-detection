<!DOCTYPE html>
<html>
<head>
  <title>Forest Fire Detection Dashboard</title>
  <meta http-equiv="refresh" content="15">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f4f8;
      padding: 20px;
      text-align: center;
    }
    .container {
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      padding: 30px;
      max-width: 600px;
      margin: auto;
    }
    h1 {
      color: #2c3e50;
    }
    .value {
      font-size: 20px;
      margin: 10px 0;
    }
    .alert {
      padding: 15px;
      margin-top: 20px;
      border-radius: 10px;
      font-weight: bold;
      font-size: 18px;
    }
    .danger {
      background-color: #ffcccc;
      color: #c0392b;
    }
    .safe {
      background-color: #ccffcc;
      color: #27ae60;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸŒ² Forest Fire Detection Dashboard</h1>
    <div id="timestamp" class="value"></div>
    <div id="methane" class="value"></div>
    <div id="co2" class="value"></div>
    <div id="temp" class="value"></div>
    <div id="humidity" class="value"></div>
    <div id="alert" class="alert"></div>
  </div>

  <script>
    const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRr-cREwXrVtnlBW5-K-0UWRWUidi_UgjrH7RKIDLWGXQDjRGJP5LHF-Looifn6YXfZHr7PAjP8eeaU/pub?output=csv";

    fetch(sheetUrl)
      .then(response => response.text())
      .then(data => {
        const rows = data.trim().split("\n");
        const latest = rows[rows.length - 1].split(",");

        const timestamp = latest[0];
        const methane = parseInt(latest[1]);
        const co2 = parseInt(latest[2]);
        const temperature = parseFloat(latest[3]);
        const humidity = parseFloat(latest[4]);
        const alert = latest[5].trim();

        document.getElementById("timestamp").innerHTML = `<strong>ðŸ“… Timestamp:</strong> ${timestamp}`;
        document.getElementById("methane").innerHTML = `<strong>ðŸ”¥ Methane (MQ4):</strong> ${methane} ppm`;
        document.getElementById("co2").innerHTML = `<strong>ðŸŒ« COâ‚‚ (MQ135):</strong> ${co2} ppm`;
        document.getElementById("temp").innerHTML = `<strong>ðŸŒ¡ Temperature:</strong> ${temperature} Â°C`;
        document.getElementById("humidity").innerHTML = `<strong>ðŸ’§ Humidity:</strong> ${humidity} %`;

        if (methane > 2000 || co2 > 2000 || temperature > 55 || humidity > 50 || alert === "YES") {
          document.getElementById("alert").className = "alert danger";
          document.getElementById("alert").innerText = "ðŸš¨ FIRE RISK DETECTED!";
        } else {
          document.getElementById("alert").className = "alert safe";
          document.getElementById("alert").innerText = "âœ… Safe â€“ No fire risk";
        }
      })
      .catch(error => {
        document.getElementById("alert").innerHTML = "Error loading data";
        console.error("Error fetching sheet:", error);
      });
  </script>
</body>
</html>
